\hypertarget{gemm__loki_8h}{}\section{src/gemm\+\_\+loki.h File Reference}
\label{gemm__loki_8h}\index{src/gemm\+\_\+loki.\+h@{src/gemm\+\_\+loki.\+h}}
{\ttfamily \#include $<$loki/lokilib.\+h$>$}\\*
{\ttfamily \#include $<$loki/scratchpad.\+h$>$}\\*
{\ttfamily \#include \char`\"{}setting.\+h\char`\"{}}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structglobal__data__}{global\+\_\+data\+\_\+}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{gemm__loki_8h_a71d9e511e7e302cd831e83581219e70d}{MC}~32
\item 
\#define \hyperlink{gemm__loki_8h_a73764abcca0b8bbf6bf355d9f1bab0b9}{KC}~64
\item 
\#define \hyperlink{gemm__loki_8h_a1fa2460e32327ade49189c95740bc1b5}{NC}~128
\item 
\#define \hyperlink{gemm__loki_8h_a9ecbd9f86f95534f1bcf71015d5ae81a}{MR}~4
\item 
\#define \hyperlink{gemm__loki_8h_af146485306ae74a2edf18636300fd107}{NR}~4
\item 
\#define \hyperlink{gemm__loki_8h_ac207a8cac40667e977769743a763e64d}{M\+A\+T\+R\+I\+X\+\_\+\+N\+U\+M\+\_\+\+C\+O\+RE}~8
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structglobal__data__}{global\+\_\+data\+\_\+} \hyperlink{gemm__loki_8h_a41b65d849dc0d79074a13a10a681ccb2}{global\+\_\+data}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{gemm__loki_8h_aa402426f4165375362b51298d32ff83a}{\+\_\+\+\_\+attribute\+\_\+\+\_\+} ((noinline)) static void dgemm\+\_\+micro\+\_\+kernel(int beta)
\item 
\hyperlink{gemm__loki_8h_ac4f4aa4476e463774ca88dc55ed5de12}{for} (\hyperlink{gemm__loki_8h_a37d972ae0b47b9099e30983131d31916}{j}=core;\hyperlink{gemm__loki_8h_a37d972ae0b47b9099e30983131d31916}{j}$<$ \hyperlink{gemm__loki_8h_a928495140935d9d6ce0a100550473140}{np};\hyperlink{gemm__loki_8h_a37d972ae0b47b9099e30983131d31916}{j}+=\hyperlink{gemm__loki_8h_ac207a8cac40667e977769743a763e64d}{M\+A\+T\+R\+I\+X\+\_\+\+N\+U\+M\+\_\+\+C\+O\+RE})
\item 
void \hyperlink{gemm__loki_8h_a02f373a9bcf45dc7d19716ee62731b2f}{dgemm\+\_\+nn\+\_\+worker} (const void $\ast$data1)
\item 
void \hyperlink{gemm__loki_8h_a9cb809024751e45d4ec3b03fb503b15f}{dgemm\+\_\+nn} (int m, int n, int k, const \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} $\ast$\hyperlink{gemm__loki_8h_a73917fb36f8ff7dbb41aec5c7208ba52}{A}, int inc\+RowA, const \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} $\ast$\hyperlink{gemm__loki_8h_a92c3741979c6d53ca2866282501944e0}{B}, int inc\+RowB,   \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} $\ast$\hyperlink{gemm__loki_8h_aee1adae4376e3fc0034e779ff47043a7}{C}, int \hyperlink{gemm__loki_8h_afba44365beb75f300916a8acc8fe367d}{inc\+RowC})
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{gemm__loki_8h_a2e6c8f821f88e1dab510dc11a7824721}{nc}
\item 
int int \hyperlink{gemm__loki_8h_a44b007fac349042dbb1bbe49210882d7}{kc}
\item 
int int \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} $\ast$ \hyperlink{gemm__loki_8h_aee1adae4376e3fc0034e779ff47043a7}{C}
\item 
int int \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} $\ast$ \hyperlink{gemm__loki_8h_a92c3741979c6d53ca2866282501944e0}{B}
\item 
int int \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} $\ast$ \hyperlink{gemm__loki_8h_a73917fb36f8ff7dbb41aec5c7208ba52}{A}
\item 
int int \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} \hyperlink{setting_8h_a4cf883a2c584175fecfaeb45a2cd75e8}{Dtype} int \hyperlink{gemm__loki_8h_afba44365beb75f300916a8acc8fe367d}{inc\+RowC}
\item 
int \hyperlink{gemm__loki_8h_a4b5efeeced2b749191f71afc3bc8bebd}{mp} = (mc+\hyperlink{gemm__loki_8h_a9ecbd9f86f95534f1bcf71015d5ae81a}{MR}-\/1) / \hyperlink{gemm__loki_8h_a9ecbd9f86f95534f1bcf71015d5ae81a}{MR}
\item 
int \hyperlink{gemm__loki_8h_a928495140935d9d6ce0a100550473140}{np} = (\hyperlink{gemm__loki_8h_a2e6c8f821f88e1dab510dc11a7824721}{nc}+\hyperlink{gemm__loki_8h_af146485306ae74a2edf18636300fd107}{NR}-\/1) / \hyperlink{gemm__loki_8h_af146485306ae74a2edf18636300fd107}{NR}
\item 
int \hyperlink{gemm__loki_8h_a98cd1365dcaab048d72c7e522b0a44b1}{\+\_\+mr} = mc \% \hyperlink{gemm__loki_8h_a9ecbd9f86f95534f1bcf71015d5ae81a}{MR}
\item 
int \hyperlink{gemm__loki_8h_aca36871af67ae9b86edcbfec96bc9fdd}{\+\_\+nr} = \hyperlink{gemm__loki_8h_a2e6c8f821f88e1dab510dc11a7824721}{nc} \% \hyperlink{gemm__loki_8h_af146485306ae74a2edf18636300fd107}{NR}
\item 
int \hyperlink{gemm__loki_8h_aa427cb017b74f99a6becf3724a84b22a}{mr}
\item 
int \hyperlink{gemm__loki_8h_a2833bf188e6bf292fa7d61e2dd54d622}{nr}
\item 
int \hyperlink{gemm__loki_8h_acb559820d9ca11295b4500f179ef6392}{i}
\item 
int \hyperlink{gemm__loki_8h_a37d972ae0b47b9099e30983131d31916}{j}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!KC@{KC}}
\index{KC@{KC}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{KC}]{\setlength{\rightskip}{0pt plus 5cm}\#define KC~64}\hypertarget{gemm__loki_8h_a73764abcca0b8bbf6bf355d9f1bab0b9}{}\label{gemm__loki_8h_a73764abcca0b8bbf6bf355d9f1bab0b9}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!M\+A\+T\+R\+I\+X\+\_\+\+N\+U\+M\+\_\+\+C\+O\+RE@{M\+A\+T\+R\+I\+X\+\_\+\+N\+U\+M\+\_\+\+C\+O\+RE}}
\index{M\+A\+T\+R\+I\+X\+\_\+\+N\+U\+M\+\_\+\+C\+O\+RE@{M\+A\+T\+R\+I\+X\+\_\+\+N\+U\+M\+\_\+\+C\+O\+RE}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{M\+A\+T\+R\+I\+X\+\_\+\+N\+U\+M\+\_\+\+C\+O\+RE}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\+A\+T\+R\+I\+X\+\_\+\+N\+U\+M\+\_\+\+C\+O\+RE~8}\hypertarget{gemm__loki_8h_ac207a8cac40667e977769743a763e64d}{}\label{gemm__loki_8h_ac207a8cac40667e977769743a763e64d}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!MC@{MC}}
\index{MC@{MC}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{MC}]{\setlength{\rightskip}{0pt plus 5cm}\#define MC~32}\hypertarget{gemm__loki_8h_a71d9e511e7e302cd831e83581219e70d}{}\label{gemm__loki_8h_a71d9e511e7e302cd831e83581219e70d}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!MR@{MR}}
\index{MR@{MR}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{MR}]{\setlength{\rightskip}{0pt plus 5cm}\#define MR~4}\hypertarget{gemm__loki_8h_a9ecbd9f86f95534f1bcf71015d5ae81a}{}\label{gemm__loki_8h_a9ecbd9f86f95534f1bcf71015d5ae81a}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!NC@{NC}}
\index{NC@{NC}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{NC}]{\setlength{\rightskip}{0pt plus 5cm}\#define NC~128}\hypertarget{gemm__loki_8h_a1fa2460e32327ade49189c95740bc1b5}{}\label{gemm__loki_8h_a1fa2460e32327ade49189c95740bc1b5}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!NR@{NR}}
\index{NR@{NR}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{NR}]{\setlength{\rightskip}{0pt plus 5cm}\#define NR~4}\hypertarget{gemm__loki_8h_af146485306ae74a2edf18636300fd107}{}\label{gemm__loki_8h_af146485306ae74a2edf18636300fd107}


\subsection{Typedef Documentation}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!global\+\_\+data@{global\+\_\+data}}
\index{global\+\_\+data@{global\+\_\+data}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{global\+\_\+data}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf global\+\_\+data\+\_\+}  {\bf global\+\_\+data}}\hypertarget{gemm__loki_8h_a41b65d849dc0d79074a13a10a681ccb2}{}\label{gemm__loki_8h_a41b65d849dc0d79074a13a10a681ccb2}


\subsection{Function Documentation}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!\+\_\+\+\_\+attribute\+\_\+\+\_\+@{\+\_\+\+\_\+attribute\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+attribute\+\_\+\+\_\+@{\+\_\+\+\_\+attribute\+\_\+\+\_\+}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{\+\_\+\+\_\+attribute\+\_\+\+\_\+((noinline)) static void dgemm\+\_\+micro\+\_\+kernel(int beta)}]{\setlength{\rightskip}{0pt plus 5cm}\+\_\+\+\_\+attribute\+\_\+\+\_\+ (
\begin{DoxyParamCaption}
\item[{(noinline)}]{}
\end{DoxyParamCaption}
)}\hypertarget{gemm__loki_8h_aa402426f4165375362b51298d32ff83a}{}\label{gemm__loki_8h_aa402426f4165375362b51298d32ff83a}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!dgemm\+\_\+nn@{dgemm\+\_\+nn}}
\index{dgemm\+\_\+nn@{dgemm\+\_\+nn}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{dgemm\+\_\+nn(int m, int n, int k, const Dtype $\ast$\+A, int inc\+Row\+A, const Dtype $\ast$\+B, int inc\+Row\+B,   Dtype $\ast$\+C, int inc\+Row\+C)}]{\setlength{\rightskip}{0pt plus 5cm}void dgemm\+\_\+nn (
\begin{DoxyParamCaption}
\item[{int}]{m, }
\item[{int}]{n, }
\item[{int}]{k, }
\item[{const {\bf Dtype} $\ast$}]{A, }
\item[{int}]{inc\+RowA, }
\item[{const {\bf Dtype} $\ast$}]{B, }
\item[{int}]{inc\+RowB, }
\item[{{\bf Dtype} $\ast$}]{C, }
\item[{int}]{inc\+RowC}
\end{DoxyParamCaption}
)}\hypertarget{gemm__loki_8h_a9cb809024751e45d4ec3b03fb503b15f}{}\label{gemm__loki_8h_a9cb809024751e45d4ec3b03fb503b15f}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!dgemm\+\_\+nn\+\_\+worker@{dgemm\+\_\+nn\+\_\+worker}}
\index{dgemm\+\_\+nn\+\_\+worker@{dgemm\+\_\+nn\+\_\+worker}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{dgemm\+\_\+nn\+\_\+worker(const void $\ast$data1)}]{\setlength{\rightskip}{0pt plus 5cm}void dgemm\+\_\+nn\+\_\+worker (
\begin{DoxyParamCaption}
\item[{const void $\ast$}]{data1}
\end{DoxyParamCaption}
)}\hypertarget{gemm__loki_8h_a02f373a9bcf45dc7d19716ee62731b2f}{}\label{gemm__loki_8h_a02f373a9bcf45dc7d19716ee62731b2f}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!for@{for}}
\index{for@{for}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{for(j=core;j$<$ np;j+=\+M\+A\+T\+R\+I\+X\+\_\+\+N\+U\+M\+\_\+\+C\+O\+R\+E)}]{\setlength{\rightskip}{0pt plus 5cm}for (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{gemm__loki_8h_ac4f4aa4476e463774ca88dc55ed5de12}{}\label{gemm__loki_8h_ac4f4aa4476e463774ca88dc55ed5de12}


\subsection{Variable Documentation}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!\+\_\+mr@{\+\_\+mr}}
\index{\+\_\+mr@{\+\_\+mr}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{\+\_\+mr}]{\setlength{\rightskip}{0pt plus 5cm}int \+\_\+mr = mc \% {\bf MR}}\hypertarget{gemm__loki_8h_a98cd1365dcaab048d72c7e522b0a44b1}{}\label{gemm__loki_8h_a98cd1365dcaab048d72c7e522b0a44b1}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!\+\_\+nr@{\+\_\+nr}}
\index{\+\_\+nr@{\+\_\+nr}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{\+\_\+nr}]{\setlength{\rightskip}{0pt plus 5cm}int \+\_\+nr = {\bf nc} \% {\bf NR}}\hypertarget{gemm__loki_8h_aca36871af67ae9b86edcbfec96bc9fdd}{}\label{gemm__loki_8h_aca36871af67ae9b86edcbfec96bc9fdd}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!A@{A}}
\index{A@{A}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{A}]{\setlength{\rightskip}{0pt plus 5cm}int int {\bf Dtype} {\bf Dtype} {\bf Dtype}$\ast$ A}\hypertarget{gemm__loki_8h_a73917fb36f8ff7dbb41aec5c7208ba52}{}\label{gemm__loki_8h_a73917fb36f8ff7dbb41aec5c7208ba52}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!B@{B}}
\index{B@{B}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{B}]{\setlength{\rightskip}{0pt plus 5cm}int int {\bf Dtype} {\bf Dtype}$\ast$ B}\hypertarget{gemm__loki_8h_a92c3741979c6d53ca2866282501944e0}{}\label{gemm__loki_8h_a92c3741979c6d53ca2866282501944e0}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!C@{C}}
\index{C@{C}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{C}]{\setlength{\rightskip}{0pt plus 5cm}int int {\bf Dtype}$\ast$ C}\hypertarget{gemm__loki_8h_aee1adae4376e3fc0034e779ff47043a7}{}\label{gemm__loki_8h_aee1adae4376e3fc0034e779ff47043a7}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!i@{i}}
\index{i@{i}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{i}]{\setlength{\rightskip}{0pt plus 5cm}int i}\hypertarget{gemm__loki_8h_acb559820d9ca11295b4500f179ef6392}{}\label{gemm__loki_8h_acb559820d9ca11295b4500f179ef6392}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!inc\+RowC@{inc\+RowC}}
\index{inc\+RowC@{inc\+RowC}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{inc\+RowC}]{\setlength{\rightskip}{0pt plus 5cm}int int {\bf Dtype} {\bf Dtype} {\bf Dtype} int inc\+RowC}\hypertarget{gemm__loki_8h_afba44365beb75f300916a8acc8fe367d}{}\label{gemm__loki_8h_afba44365beb75f300916a8acc8fe367d}
{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
    uint core = get\_core\_id() + 8*tile2int(get\_tile\_id())
\end{DoxyCode}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!j@{j}}
\index{j@{j}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{j}]{\setlength{\rightskip}{0pt plus 5cm}int j}\hypertarget{gemm__loki_8h_a37d972ae0b47b9099e30983131d31916}{}\label{gemm__loki_8h_a37d972ae0b47b9099e30983131d31916}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!kc@{kc}}
\index{kc@{kc}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{kc}]{\setlength{\rightskip}{0pt plus 5cm}int int kc}\hypertarget{gemm__loki_8h_a44b007fac349042dbb1bbe49210882d7}{}\label{gemm__loki_8h_a44b007fac349042dbb1bbe49210882d7}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!mp@{mp}}
\index{mp@{mp}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{mp}]{\setlength{\rightskip}{0pt plus 5cm}int mp = (mc+{\bf MR}-\/1) / {\bf MR}}\hypertarget{gemm__loki_8h_a4b5efeeced2b749191f71afc3bc8bebd}{}\label{gemm__loki_8h_a4b5efeeced2b749191f71afc3bc8bebd}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!mr@{mr}}
\index{mr@{mr}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{mr}]{\setlength{\rightskip}{0pt plus 5cm}int mr}\hypertarget{gemm__loki_8h_aa427cb017b74f99a6becf3724a84b22a}{}\label{gemm__loki_8h_aa427cb017b74f99a6becf3724a84b22a}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!nc@{nc}}
\index{nc@{nc}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{nc}]{\setlength{\rightskip}{0pt plus 5cm}int nc}\hypertarget{gemm__loki_8h_a2e6c8f821f88e1dab510dc11a7824721}{}\label{gemm__loki_8h_a2e6c8f821f88e1dab510dc11a7824721}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!np@{np}}
\index{np@{np}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{np}]{\setlength{\rightskip}{0pt plus 5cm}int np = ({\bf nc}+{\bf NR}-\/1) / {\bf NR}}\hypertarget{gemm__loki_8h_a928495140935d9d6ce0a100550473140}{}\label{gemm__loki_8h_a928495140935d9d6ce0a100550473140}
\index{gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}!nr@{nr}}
\index{nr@{nr}!gemm\+\_\+loki.\+h@{gemm\+\_\+loki.\+h}}
\subsubsection[{nr}]{\setlength{\rightskip}{0pt plus 5cm}int nr}\hypertarget{gemm__loki_8h_a2833bf188e6bf292fa7d61e2dd54d622}{}\label{gemm__loki_8h_a2833bf188e6bf292fa7d61e2dd54d622}
