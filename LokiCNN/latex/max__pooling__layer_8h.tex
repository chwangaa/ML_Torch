\hypertarget{max__pooling__layer_8h}{}\section{src/max\+\_\+pooling\+\_\+layer.h File Reference}
\label{max__pooling__layer_8h}\index{src/max\+\_\+pooling\+\_\+layer.\+h@{src/max\+\_\+pooling\+\_\+layer.\+h}}


max pooling layer  


{\ttfamily \#include \char`\"{}layer.\+h\char`\"{}}\\*
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef \hyperlink{structLayer}{Layer} \hyperlink{max__pooling__layer_8h_a5948d5617be08df8a54e4524207e8442}{pool\+\_\+layer\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{max__pooling__layer_8h_a0613224d96bab7fd19524a50fde5bc24}{max\+\_\+pool\+\_\+forward} (const \hyperlink{max__pooling__layer_8h_a5948d5617be08df8a54e4524207e8442}{pool\+\_\+layer\+\_\+t} $\ast$l, const \hyperlink{data__structure_8h_a051bd2b17d42e70d86b4314e0dd8881e}{vol\+\_\+t} $\ast$$\ast$\hyperlink{max__pooling__layer__MultiCore_8h_ab943d53559ea6283e896bd8bf603b626}{in}, \hyperlink{data__structure_8h_a051bd2b17d42e70d86b4314e0dd8881e}{vol\+\_\+t} $\ast$$\ast$\hyperlink{max__pooling__layer__MultiCore_8h_abc600ae3097d3509f83258671cf3701e}{out}, const int \hyperlink{max__pooling__layer__MultiCore_8h_a79cb7003c3528d3096592502cbd07fb9}{start}, const int \hyperlink{max__pooling__layer__MultiCore_8h_a3efd06bf9a5c88624e60c85040903747}{end})
\begin{DoxyCompactList}\small\item\em Spatial Max Pooling layer forward routine. \end{DoxyCompactList}\item 
\hyperlink{max__pooling__layer_8h_a5948d5617be08df8a54e4524207e8442}{pool\+\_\+layer\+\_\+t} $\ast$ \hyperlink{max__pooling__layer_8h_a6248e55eebe95cc9b7413e0c431108d6}{make\+\_\+max\+\_\+pool\+\_\+layer} (int in\+\_\+sx, int in\+\_\+sy, int in\+\_\+depth, int sx, int stride)
\begin{DoxyCompactList}\small\item\em constructor of max\+\_\+pooling layer \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
max pooling layer 



\subsection{Typedef Documentation}
\index{max\+\_\+pooling\+\_\+layer.\+h@{max\+\_\+pooling\+\_\+layer.\+h}!pool\+\_\+layer\+\_\+t@{pool\+\_\+layer\+\_\+t}}
\index{pool\+\_\+layer\+\_\+t@{pool\+\_\+layer\+\_\+t}!max\+\_\+pooling\+\_\+layer.\+h@{max\+\_\+pooling\+\_\+layer.\+h}}
\subsubsection[{pool\+\_\+layer\+\_\+t}]{\setlength{\rightskip}{0pt plus 5cm}typedef {\bf Layer} {\bf pool\+\_\+layer\+\_\+t}}\hypertarget{max__pooling__layer_8h_a5948d5617be08df8a54e4524207e8442}{}\label{max__pooling__layer_8h_a5948d5617be08df8a54e4524207e8442}


\subsection{Function Documentation}
\index{max\+\_\+pooling\+\_\+layer.\+h@{max\+\_\+pooling\+\_\+layer.\+h}!make\+\_\+max\+\_\+pool\+\_\+layer@{make\+\_\+max\+\_\+pool\+\_\+layer}}
\index{make\+\_\+max\+\_\+pool\+\_\+layer@{make\+\_\+max\+\_\+pool\+\_\+layer}!max\+\_\+pooling\+\_\+layer.\+h@{max\+\_\+pooling\+\_\+layer.\+h}}
\subsubsection[{make\+\_\+max\+\_\+pool\+\_\+layer(int in\+\_\+sx, int in\+\_\+sy, int in\+\_\+depth, int sx, int stride)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pool\+\_\+layer\+\_\+t}$\ast$ make\+\_\+max\+\_\+pool\+\_\+layer (
\begin{DoxyParamCaption}
\item[{int}]{in\+\_\+sx, }
\item[{int}]{in\+\_\+sy, }
\item[{int}]{in\+\_\+depth, }
\item[{int}]{sx, }
\item[{int}]{stride}
\end{DoxyParamCaption}
)}\hypertarget{max__pooling__layer_8h_a6248e55eebe95cc9b7413e0c431108d6}{}\label{max__pooling__layer_8h_a6248e55eebe95cc9b7413e0c431108d6}


constructor of max\+\_\+pooling layer 


\begin{DoxyParams}{Parameters}
{\em in\+\_\+sx} & the width of input image \\
\hline
{\em in\+\_\+sy} & the height of input image \\
\hline
{\em in\+\_\+depth} & the channel number of input image \\
\hline
{\em sx} & the width of pooling kernel, note the kernel must be square \\
\hline
{\em stride} & the number of pixels between consecutive convolutional kernel movement, usually 1\\
\hline
\end{DoxyParams}
in this simple implementation, we assume the max pooling layer has padding be 0, although one can simply insert one extra parameter and the forward layer already supports none-\/zero padding. The output dimension is calculated as following\+:

out\+\_\+sx = floor((l-\/$>$in\+\_\+sx + pad $\ast$ 2 -\/ sx) / stride + 1);

out\+\_\+sy = floor((l-\/$>$in\+\_\+sy + pad $\ast$ 2 -\/ sy) / stride + 1);

usually, the output size is reduced by a factor of the kernel size it is required that the kernel height and kernel width are the same in Loki\+C\+NN \index{max\+\_\+pooling\+\_\+layer.\+h@{max\+\_\+pooling\+\_\+layer.\+h}!max\+\_\+pool\+\_\+forward@{max\+\_\+pool\+\_\+forward}}
\index{max\+\_\+pool\+\_\+forward@{max\+\_\+pool\+\_\+forward}!max\+\_\+pooling\+\_\+layer.\+h@{max\+\_\+pooling\+\_\+layer.\+h}}
\subsubsection[{max\+\_\+pool\+\_\+forward(const pool\+\_\+layer\+\_\+t $\ast$l, const vol\+\_\+t $\ast$$\ast$in, vol\+\_\+t $\ast$$\ast$out, const int start, const int end)}]{\setlength{\rightskip}{0pt plus 5cm}void max\+\_\+pool\+\_\+forward (
\begin{DoxyParamCaption}
\item[{const {\bf pool\+\_\+layer\+\_\+t} $\ast$}]{l, }
\item[{const {\bf vol\+\_\+t} $\ast$$\ast$}]{in, }
\item[{{\bf vol\+\_\+t} $\ast$$\ast$}]{out, }
\item[{const int}]{start, }
\item[{const int}]{end}
\end{DoxyParamCaption}
)}\hypertarget{max__pooling__layer_8h_a0613224d96bab7fd19524a50fde5bc24}{}\label{max__pooling__layer_8h_a0613224d96bab7fd19524a50fde5bc24}


Spatial Max Pooling layer forward routine. 


\begin{DoxyParams}{Parameters}
{\em l} & the pooling layer pointer \\
\hline
{\em in} & the input images \\
\hline
{\em out} & the ouput images \\
\hline
{\em start} & the index in the input batch from which to perform forwarding \\
\hline
{\em end} & the index in the input batch from which to stop perform forwarding \\
\hline
\end{DoxyParams}
